<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="styles.css">
        <title>Comment Box</title>
    </head>
    <body>
        <main>
        <form id="login">
            <label for="name_entry">User Name
                <input id='name_entry' class="input" type="text" placeholder="Your Username" required>
            </label>
            <label for='email_entry'>Email
                <input id="email_entry" class="input" type="email" placeholder="anything@email.com" required>
            </label>
            <label for="comment_entry">Comment
                <input id="comment_entry" class="input" type="text" placeholder="Enter your comment" onkeydown="liveCount(this)" required>
                <span id="counter">0/140</span>
            </label>
            
            <button id="enter" type="button" onclick="fetch()">Comment</button>
        </form>
        <div id="forum"></div>
        </main>
    </body>
    <script>
    //live counter on display & warning of maximum triggered by keydown event in #comment_entry
        function liveCount(obj) {
            document.getElementById('counter').innerHTML = `${obj.value.length}/140`;

            if (obj.value.length >= 140){
                document.getElementById('comment_entry').style.color = 'red';
            }
        };

        //set forum as an empty array
        const mail_list = [];
        let forum = document.getElementById('forum');
        //fetch entered data and append to forum when submitted
        function fetch(){
            let np = document.createElement('p');
            np.classList.add('user_name');
            let nc = document.createTextNode(`${document.getElementById('name_entry').value}:`);
            let cp = document.createElement('p');
            cp.classList.add('user_comment');
            let cc = document.createTextNode(document.getElementById('comment_entry').value);
            forum.appendChild(np);
            np.appendChild(nc);
            forum.appendChild(cp);
            cp.appendChild(cc);
            
            //create a mailing list
            let address = document.getElementById('email_entry').value;
            mail_list.push(address);
            //clear input fields with each submit
            let inputs = document.querySelectorAll('input');
            inputs.forEach(input => input.value = '');
        };
    </script>
</html>